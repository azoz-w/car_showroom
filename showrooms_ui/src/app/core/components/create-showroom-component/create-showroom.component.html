<!-- Create Button -->
<button
  (click)="openModal()"
  class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg transition-colors"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="size-4"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M12 4.5v15m7.5-7.5h-15"
    />
  </svg>
</button>

<!-- Create Modal -->
<app-modal [(isOpen)]="isModalOpen" [title]="'Create New Showroom'">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
    <!-- Name -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Name *
      </label>
      <input
        type="text"
        formControlName="name"
        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        [class.border-red-500]="isFieldInvalid('name')"
      />
      <div *ngIf="isFieldInvalid('name')" class="text-red-500 text-sm mt-1">
        <span *ngIf="form.get('name')?.errors?.['required']">
          Name is required
        </span>
        <span *ngIf="form.get('name')?.errors?.['maxlength']">
          Name must not exceed 100 characters
        </span>
      </div>
    </div>

    <!-- Commercial Registration Number -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Commercial Registration Number *
      </label>
      <input
        type="text"
        formControlName="commercialRegistrationNumber"
        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        [class.border-red-500]="isFieldInvalid('commercialRegistrationNumber')"
      />
      <div
        *ngIf="isFieldInvalid('commercialRegistrationNumber')"
        class="text-red-500 text-sm mt-1"
      >
        <span
          *ngIf="form.get('commercialRegistrationNumber')?.errors?.['required']"
        >
          Commercial registration number is required
        </span>
        <span
          *ngIf="form.get('commercialRegistrationNumber')?.errors?.['pattern']"
        >
          Must be exactly 10 digits
        </span>
      </div>
    </div>

    <!-- Contact Number -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Contact Number *
      </label>
      <input
        type="text"
        formControlName="contactNumber"
        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        [class.border-red-500]="isFieldInvalid('contactNumber')"
      />
      <div
        *ngIf="isFieldInvalid('contactNumber')"
        class="text-red-500 text-sm mt-1"
      >
        <span *ngIf="form.get('contactNumber')?.errors?.['required']">
          Contact number is required
        </span>
        <span *ngIf="form.get('contactNumber')?.errors?.['pattern']">
          Must be numeric and not exceed 15 digits
        </span>
      </div>
    </div>

    <!-- Manager Name (Optional) -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Manager Name
      </label>
      <input
        type="text"
        formControlName="managerName"
        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        [class.border-red-500]="isFieldInvalid('managerName')"
      />
      <div
        *ngIf="isFieldInvalid('managerName')"
        class="text-red-500 text-sm mt-1"
      >
        <span *ngIf="form.get('managerName')?.errors?.['maxlength']">
          Manager name must not exceed 100 characters
        </span>
      </div>
    </div>

    <!-- Address (Optional) -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Address
      </label>
      <textarea
        formControlName="address"
        rows="3"
        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        [class.border-red-500]="isFieldInvalid('address')"
      ></textarea>
      <div *ngIf="isFieldInvalid('address')" class="text-red-500 text-sm mt-1">
        <span *ngIf="form.get('address')?.errors?.['maxlength']">
          Address must not exceed 255 characters
        </span>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        (click)="closeModal()"
        class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"
      >
        Cancel
      </button>
      <button
        type="submit"
        [disabled]="form.invalid || isSubmitting"
        class="px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
      >
        <span *ngIf="!isSubmitting">Create</span>
        <span *ngIf="isSubmitting">Creating...</span>
      </button>
    </div>
  </form>
</app-modal>
